<!DOCTYPE html>
<html lang="gu">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>7th Pay Fixation Calculator - Gujarat Final Edition</title>
    <style>
        :root { --primary: #1a73e8; --secondary: #1e7e34; --danger: #d93025; --dark: #202124; --best: #fff9c4; }
        body { font-family: 'Segoe UI', Tahoma, sans-serif; background: #f0f2f5; margin: 0; padding: 10px; color: var(--dark); }
        .container { max-width: 1100px; margin: auto; background: white; padding: 20px; border-radius: 12px; box-shadow: 0 10px 30px rgba(0,0,0,0.1); }
        h2 { text-align: center; color: var(--primary); margin-bottom: 25px; border-bottom: 2px solid #eee; padding-bottom: 15px; font-size: 1.4rem; }
        .input-section { display: grid; grid-template-columns: 1fr; gap: 15px; background: #f8f9fa; padding: 20px; border-radius: 10px; border: 1px solid #e0e0e0; }
        @media (min-width: 600px) { .input-section { grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); } }
        .input-group { display: flex; flex-direction: column; }
        label { font-weight: bold; font-size: 13px; margin-bottom: 8px; color: #5f6368; }
        input, select { padding: 12px; border: 1px solid #dadce0; border-radius: 6px; font-size: 16px; outline: none; background: white; }
        button { grid-column: 1 / -1; background: var(--primary); color: white; border: none; padding: 16px; border-radius: 6px; font-size: 16px; font-weight: bold; cursor: pointer; margin-top: 10px; transition: 0.3s; }
        button:hover { background: #1557b0; transform: translateY(-1px); }
        .conclusion-box { margin-top: 25px; padding: 20px; border-radius: 10px; display: none; text-align: center; border: 2px dashed var(--secondary); background: #f6fff8; }
        .best-label { color: var(--secondary); font-weight: bold; font-size: 1.2em; }
        .result-container { display: grid; grid-template-columns: 1fr; gap: 25px; margin-top: 30px; }
        @media (min-width: 900px) { .result-container { grid-template-columns: 1fr 1fr; } }
        .res-card { padding: 20px; border-radius: 10px; border-top: 6px solid #ccc; background: #fff; box-shadow: 0 4px 12px rgba(0,0,0,0.08); display: none; }
        .opt1 { border-color: var(--primary); }
        .opt2 { border-color: var(--secondary); }
        table { width: 100%; border-collapse: collapse; margin-top: 15px; font-size: 14px; }
        th, td { border-bottom: 1px solid #eee; padding: 12px 8px; text-align: left; }
        th { background: #f8f9fa; color: #5f6368; }
        .highlight { background-color: #e8f0fe; font-weight: bold; color: var(--primary); }
        .bonus { background-color: #e6f4ea; font-weight: bold; color: var(--secondary); }
        .dni-row { background-color: #fff9e6; font-weight: bold; }
        .info-text { font-size: 12px; color: #70757a; margin-top: 15px; background: #f1f3f4; padding: 10px; border-radius: 4px; }
    </style>
</head>
<body>
<div class="container">
    <h2>૭-મું પગાર પંચ બઢતી / ઉપધો પગાર બાંધણી કેલ્ક્યુલેટર</h2>
    <h2>ગુજરાત સરકારના ROP-2016 મુજબ </h2>
    <p class="info-text">નોંધ: આ માત્ર શૈક્ષણીક હેતુ છે આખરી પગારબાંધણી ગુજરાત સરકારના ઠરાવો અને પગારચકાસણી એકમને આધીન રહેશે જેને ધ્યાને લેવા વિનંતી.</p>
    <div class="input-section">
        <div class="input-group">
            <label>હાલનું લેવલ (Current Level)</label>
            <select id="cLvl" onchange="populateBasicPay()"></select>
        </div>
        <div class="input-group">
            <label>હાલનો બેઝિક (Current Basic)</label>
            <select id="bp"></select>
        </div>
        <div class="input-group">
            <label>નવું લેવલ બઢતી/ઉચ્ચતરની જગાનું (New Level)</label>
            <select id="nLvl"></select>
        </div>
        <div class="input-group">
            <label>બઢતી / ઉચ્ચતર તારીખ (Promotion Date)</label>
            <input type="date" id="pDate" value="2025-04-16">
        </div>
        <div class="input-group">
            <label>ઈજાફાનો મહિનો (Increment Month)</label>
            <select id="iMo">
                <option value="6">જુલાઈ (July)</option>
                <option value="0">જાન્યુઆરી (January)</option>
            </select>
        </div>
        <button onclick="calculateFixation()">પગાર બાંધણીની ગણતરી કરો</button>
    </div>

    <div id="conclusion" class="conclusion-box"></div>

    <div id="results" class="result-container">
        <div class="res-card opt1" id="card1">
            <h3 id="opt1Title" style="color:var(--primary); margin-top:0;"></h3>
            <table>
                <thead><tr><th>તારીખ</th><th>વિગત</th><th>પગારધોરણ </th><th>પગાર</th></tr></thead>
                <tbody id="b1"></tbody>
            </table>
            <p class="info-text">નોંધ: આ વિકલ્પમાં ૬ મહિના પછી પહેલો ઈજાફો અને ત્યારબાદ દર વર્ષે ઈજાફો મળે છે.</p>
        </div>

        <div class="res-card opt2" id="card2">
            <h3 id="opt2Title" style="color:var(--secondary); margin-top:0;"></h3>
            <table>
                <thead><tr><th>તારીખ</th><th>વિગત</th><th>પગારધોરણ </th><th>પગાર</th></tr></thead>
                <tbody id="b2"></tbody>
            </table>
            <p class="info-text">નોંધ: ઈજાફાની તારીખે એક સાથે બે ઈજાફા નિયમિત + કાલ્પનિક  નો લાભ મળે છે.</p>
        </div>
    </div>
    <div id="matrixPreview" style="margin-top:30px;"></div>
</div>

<script>
const matrix = {
    "IS-1 (1300 Grade pay)": [14800, 15200, 15700, 16200, 16700, 17200, 17700, 18200, 18700, 19300, 19900, 20500, 21100, 21700, 22400, 23100, 23800, 24500, 25200, 26000, 26800, 27600, 28400, 29300, 30200, 31100, 32000, 33000, 34000, 35000, 36100, 37200, 38300, 39400, 40600, 41800, 43100, 44400, 45700, 47100],
    "IS-2 (1400 Grade pay)": [15000, 15500, 16000, 16500, 17000, 17500, 18000, 18500, 19100, 19700, 20300, 20900, 21500, 22100, 22800, 23500, 24200, 24900, 25600, 26400, 27200, 28000, 28800, 29700, 30600, 31500, 32400, 33400, 34400, 35400, 36500, 37600, 38700, 39900, 41100, 42300, 43600, 44900, 46200, 47600],
    "IS-3 (1650 Grade pay)": [15700, 16200, 16700, 17200, 17700, 18200, 18700, 19300, 19900, 20500, 21100, 21700, 22400, 23100, 23800, 24500, 25200, 26000, 26800, 27600, 28400, 29300, 30200, 31100, 32000, 33000, 34000, 35000, 36100, 372બઢતી38300, 39400, 40600, 41800, 43100, 44400, 45700, 47100, 48500, 50000],
    "1 (1800 Grade pay)": [18000, 18500, 19100, 19700, 20300, 20900, 21500, 22100, 22800, 23500, 24200, 24900, 25600, 26400, 27200, 28000, 28800, 29700, 30600, 31500, 32400, 33400, 34400, 35400, 36500, 37600, 38700, 39900, 41100, 42300, 43600, 44900, 46200, 47600, 49000, 50500, 52000, 53600, 55200, 56900],
    "2 (1900 Grade pay)": [19900, 20500, 21100, 21700, 22400, 23100, 23800, 24500, 25200, 26000, 26800, 27600, 28400, 29300, 30200, 31100, 32000, 33000, 34000, 35000, 36100, 37200, 38300, 39400, 40600, 41800, 43100, 44400, 45700, 47100, 48500, 50000, 51500, 53000, 54600, 56200, 57900, 59600, 61400, 63200],
    "3 (2000 Grade pay)": [21700, 22400, 23100, 23800, 24500, 25200, 26000, 26800, 27600, 28400, 29300, 30200, 31100, 32000, 33000, 34000, 35000, 36100, 37200, 38300, 39400, 40600, 41800, 43100, 44400, 45700, 47100, 48500, 50000, 51500, 53000, 54600, 56200, 57900, 59600, 61400, 63200, 65100, 67100, 69100],
    "4 (2400 Grade pay)": [25500, 26300, 27100, 27900, 28700, 29600, 30500, 31400, 32300, 33300, 34300, 35300, 36400, 37500, 38600, 39800, 41000, 42200, 43500, 44800, 46100, 47500, 48900, 50400, 51900, 53500, 55100, 56800, 58500, 60300, 62100, 64000, 65900, 67900, 69900, 72000, 74200, 76400, 78700, 81100],
    "5 (2800 Grade pay)": [29200, 30100, 31000, 31900, 32900, 33900, 34900, 35900, 37000, 38100, 39200, 40400, 41600, 42800, 44100, 45400, 46800, 48200, 49600, 51100, 52600, 54200, 55800, 57500, 59200, 61000, 62800, 64700, 66600, 68600, 70700, 72800, 75000, 77300, 79600, 82000, 84500, 87000, 89600, 92300],
    "6 (4200 Grade pay)": [35400, 36500, 37600, 38700, 39900, 41100, 42300, 43600, 44900, 46200, 47600, 49000, 50500, 52000, 53600, 55200, 56900, 58600, 60400, 62200, 64100, 66000, 68000, 70000, 72100, 74300, 76500, 78800, 81200, 83600, 86100, 88700, 91400, 94100, 96900, 99800, 102800, 105900, 109100, 112400],
    "7 (4400 Grade pay)": [39900, 41100, 42300, 43600, 44900, 46200, 47600, 49000, 50500, 52000, 53600, 55200, 56900, 58600, 60400, 62200, 64100, 66000, 68000, 70000, 72100, 74300, 76500, 78800, 81200, 83600, 86100, 88700, 91400, 94100, 96900, 99800, 102800, 105900, 109100, 112400, 115800, 119300, 122900, 126600],
    "8 (4600 Grade pay)": [44900, 46200, 47600, 49000, 50500, 52000, 53600, 55200, 56900, 58600, 60400, 62200, 64100, 66000, 68000, 70000, 72100, 74300, 76500, 78800, 81200, 83600, 86100, 88700, 91400, 94100, 96900, 99800, 102800, 105900, 109100, 112400, 115800, 119300, 122900, 126600, 130400, 134300, 138300, 142400],
    "9 (5400 Grade pay)": [53100, 54700, 56300, 58000, 59700, 61500, 63300, 65200, 67200, 69200, 71300, 73400, 75600, 77900, 80200, 82600, 85100, 87700, 90300, 93000, 95800, 98700, 101700, 104800, 107900, 111100, 114400, 117800, 121300, 124900, 128600, 132500, 136500, 140600, 144800, 149100, 153600, 158200, 162900, 167800],
    "10 class-1 (5400 Grade pay)": [56100, 57800, 59500, 61300, 63100, 65000, 67000, 69000, 71100, 73200, 75400, 77700, 80000, 82400, 84900, 87400, 90000, 92700, 95500, 98400, 101400, 104400, 107500, 110700, 114000, 117400, 120900, 124500, 128200, 132000, 136000, 140100, 144300, 148600, 153100, 157700, 162400, 167300, 172300, 177500],
    "11 (6600 Grade pay)": [67700, 69700, 71800, 74000, 76200, 78500, 80900, 83300, 85800, 88400, 91100, 93800, 96600, 99500, 102500, 105600, 108800, 112100, 115500, 119000, 122600, 126300, 130100, 134000, 138000, 142100, 146400, 150800, 155300, 160000, 164800, 169700, 174800, 180000, 185400, 191000, 196700, 202600, 208700, 215000],
    "12 (7600 Grade pay)": [78800, 81200, 83600, 86100, 88700, 91400, 94100, 96900, 99800, 102800, 105900, 109100, 112400, 115800, 119300, 122900, 126600, 130400, 134300, 138300, 142400, 146700, 151100, 155600, 160300, 165100, 170100, 175200, 180500, 185900, 191500, 197200, 203100, 209200],
    "13 (8700 Grade pay)": [123100, 126800, 130600, 134500, 138500, 142700, 147000, 151400, 155900, 160600, 165400, 170400, 175500, 180800, 186200, 191800, 197600, 203500, 209600, 215900],
    "13-A (8900 Grade pay)": [131100, 135000, 139100, 143300, 147600, 152000, 156600, 161300, 166100, 171100, 176200, 181500, 186900, 192500, 198300, 204200, 210300, 216600],
    "14 (10000 Grade pay)": [144200, 148500, 153000, 157600, 162300, 167200, 172200, 177400, 182700, 188200, 193800, 199600, 205600, 211800, 218200],
    "15 (HAG)": [182200, 187700, 193300, 199100, 205100, 211300, 217600, 224100],
    "16 ( CS )": [225000]
};

function init() {
    const c = document.getElementById("cLvl"), n = document.getElementById("nLvl");
    Object.keys(matrix).forEach(l => {
        c.innerHTML += `<option value="${l}">Level ${l}</option>`;
        n.innerHTML += `<option value="${l}">Level ${l}</option>`;
    });
    c.value = "11"; n.value = "12";
    populateBasicPay();
}

function populateBasicPay() {
    const cl = document.getElementById('cLvl').value;
    const bpSelect = document.getElementById('bp');
    bpSelect.innerHTML = '';
    matrix[cl].forEach(val => {
        bpSelect.innerHTML += `<option value="${val}">${val}</option>`;
    });
}

function getNext(l, v) { return matrix[l].find(x => x > v) || v; }
function fixPay(l, v) { return matrix[l].find(x => x >= v) || v; }
function fmt(d) { return d.toLocaleDateString('en-GB'); }
function money(v) { return Number(v).toLocaleString('en-IN'); }

function calculate6MonthDNI(startDate) {
    let year = startDate.getFullYear();
    let jan = new Date(year, 0, 1), july = new Date(year, 6, 1);
    if (july > startDate && (july - startDate) >= (180 * 24 * 3600 * 1000)) return july;
    jan.setFullYear(year + 1);
    if (jan > startDate && (jan - startDate) >= (180 * 24 * 3600 * 1000)) return jan;
    july.setFullYear(year + 1);
    return july;
}

function calculateFixation() {
    const cl = document.getElementById('cLvl').value, nl = document.getElementById('nLvl').value;
    const bp = parseInt(document.getElementById('bp').value);
    const pDate = new Date(document.getElementById('pDate').value);
    document.getElementById('opt1Title').innerText =
    "વિકલ્પ ૧ (વિકલ્પ વિના ): બઢતી / ઉચ્ચતર તારીખથી " + fmt(pDate);
    const iMo = parseInt(document.getElementById('iMo').value);

    // Option 1 logic
    const n1 = getNext(cl, bp), p1 = fixPay(nl, n1), dni1 = calculate6MonthDNI(pDate), p1dni = getNext(nl, p1);
    document.getElementById('b1').innerHTML = `
        <tr><td>${fmt(pDate)}</td><td>નોશનલ ઈજાફો</td><td>Level-${cl}</td><td>${money(n1)}</td></tr>
        <tr class="highlight"><td>${fmt(pDate)}</td><td>પગાર ફિક્સેશન</td><td>Level-${nl}</td><td>${money(p1)}</td></tr>
        <tr class="dni-row"><td>${fmt(dni1)}</td><td>આગામી ઈજાફો</td><td>Level-${nl}</td><td>${money(p1dni)}</td></tr>
    `;

    // Option 2 logic
    const tempPay = fixPay(nl, bp);
    let optD = new Date(pDate.getFullYear(), iMo, 1);
if (optD <= pDate) optD.setFullYear(optD.getFullYear() + 1);

// ADD THIS LINE BELOW
document.getElementById('opt2Title').innerText =
    "વિકલ્પ ૨ (વિકલ્પના લાભ સાથે ): ઈજાફા તારીખથી " + fmt(optD);
    if (optD <= pDate) optD.setFullYear(optD.getFullYear() + 1);

    // Date Range logic: Promotion date to (Increment Date - 1 day)
    let provEndDate = new Date(optD);
    provEndDate.setDate(provEndDate.getDate() - 1);

    const reg = getNext(cl, bp), promo = getNext(cl, reg), p2 = fixPay(nl, promo);
    let dni2 = new Date(optD); dni2.setFullYear(optD.getFullYear() + 1);
    const p2dni = getNext(nl, p2);

    document.getElementById('b2').innerHTML = `
        <tr><td><b>${fmt(pDate)} થી ${fmt(provEndDate)}</b></td><td><b>કામચલાઉ પગાર </b></td><td><b>Level-${nl}</b></td><td><b>${money(tempPay)}</b></td></tr>
        <tr><td>${fmt(optD)}</td><td>નિયમિત ઈજાફો </td><td>Level-${cl}</td><td>${money(reg)}</td></tr>
        <tr><td>${fmt(optD)}</td><td>કાલ્પનિક ઈજાફો </td><td>Level-${cl} </td><td>${money(promo)}</td></tr>
        <tr class="bonus"><td>${fmt(optD)}</td><td>ઈજાફાના દિવસે પગારબાંધણી </td><td>Level-${nl}</td><td>${money(p2)}</td></tr>
        <tr class="dni-row"><td>${fmt(dni2)}</td><td>આગામી ઈજાફો</td><td>Level-${nl} </td><td>${money(p2dni)}</td></tr>
    `;

    const conc = document.getElementById('conclusion');
    conc.style.display = "block";
    showMatrixPreview(cl, bp, nl, p1);

    // Comparison Logic
    if (p2dni > p1dni) {
        conc.innerHTML = `<span class="best-label">વિકલ્પ ૨ (Option 2) શ્રેષ્ઠ છે.</span><br><small>લાંબા ગાળે આ વિકલ્પમાં પગાર ₹${money(p2dni)} થશે.</small>`;
    } else if (p1dni > p2dni) {
        conc.innerHTML = `<span class="best-label">વિકલ્પ ૧ (Option 1) શ્રેષ્ઠ છે.</span><br><small>બઢતી તારીખથી જ ઊંચો પગાર મળે છે.</small>`;
    } else {
        conc.innerHTML = `<span class="best-label">બંને વિકલ્પમાં સમાન ફાયદો છે. વિકલ્પ ૧ પસંદ કરી શકાય.</span>`;
    }

    document.querySelectorAll('.res-card').forEach(c => c.style.display = 'block');
}

function showMatrixPreview(oldLevel, oldPay, newLevel, newPay) {
    function getRows(level, pay) {
        const arr = matrix[level];
        const index = arr.indexOf(pay);
        if (index === -1) return "";
        let start = Math.max(0, index - 3);
        let end = Math.min(arr.length - 1, index + 3);
        let rows = "";
        for (let i = start; i <= end; i++) {
            rows += `<tr class="${i === index ? 'highlight' : ''}"><td style="padding:8px;border-bottom:1px solid #eee;">${money(arr[i])}</td></tr>`;
        }
        return rows;
    }

    document.getElementById("matrixPreview").innerHTML = `
        <div style="display:grid;grid-template-columns:1fr 1fr;gap:20px;">
            <div class="res-card opt1" style="display:block;">
                <h3 style="color:var(--primary);margin-top:0;">Old Level (Level-${oldLevel})</h3>
                <table><thead><tr><th>Matrix</th></tr></thead><tbody>${getRows(oldLevel, oldPay)}</tbody></table>
            </div>
            <div class="res-card opt2" style="display:block;">
                <h3 style="color:var(--secondary);margin-top:0;">New Level (Level-${newLevel})</h3>
                <table><thead><tr><th>Matrix</th></tr></thead><tbody>${getRows(newLevel, newPay)}</tbody></table>
            </div>
        </div>
    `;
}

window.onload = init;
</script>
</body>
</html>
